{% extends 'layout.html' %}
{% block content %}
<h1>Loan to {{ loan.child }}</h1>
<p>Original amount: {{ '%.2f'|format(loan.principal) }}</p>
<p>Current balance: {{ '%.2f'|format(balance) }}</p>
<p>Interest rate: {{ loan.interest_rate }}%</p>
<p>Term: {{ loan.months }} months</p>
<p>Expected payment per month: {{ '%.2f'|format(loan.payment_per_month) }}</p>
<p>Total expected repayment: {{ '%.2f'|format(loan.total_expected_repayment) }}</p>
<div class="mb-3">
  <a href="{{ url_for('add_payment', loan_id=loan.id) }}" class="btn btn-primary">Add payment</a>
  <a href="{{ url_for('download_loan', loan_id=loan.id) }}" class="btn btn-secondary">Download JSON</a>
</div>
<table class="table table-striped">
  <thead>
    <tr><th>Date</th><th>Payment</th><th>Remaining</th></tr>
  </thead>
  <tbody>
    {% for p in payments %}
    <tr>
      <td>{{ p.date }}</td>
      <td>{{ '%.2f'|format(p.amount) }}</td>
      <td>{{ '%.2f'|format(p.balance) }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
